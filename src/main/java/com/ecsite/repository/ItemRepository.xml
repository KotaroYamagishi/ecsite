<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ecsite.repository.ItemRepository">
    <select id="findAll" resultType="com.ecsite.domain.Item">
        select * 
        from items
        <if test="itemSearchForm.searchName!=null">
        where name like '%' || #{itemSearchForm.searchName} || '%'
        </if>
        <if test="itemSearchForm.sort!=null">
        ORDER BY price_m ${itemSearchForm.sort}
        </if>
        <if test="pageable != null and pageable.pageSize > 0">
          LIMIT #{pageable.pageSize} OFFSET #{pageable.offset}
        </if>
    </select>
</mapper>